<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Jogo Espacial</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    body, html {
      margin: 0;
      padding: 0;
      height: 100%;
      overflow: hidden;
    }

    .background {
      background-image: url(image/background.png); /* sua imagem de fundo */
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      height: 100vh;
      width: 100%;
      position: relative;
    }

    .hud {
  position: absolute;
  top: 10px;
  left: 10px;
  background-color: rgba(0, 0, 0, 0.7);
  border: 2px solid white;
  padding: 15px;
  font-family: monospace;
  font-size: 1rem;
  width: 180px;
  box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
}

.hud-item {
  display: flex;
  align-items: center;
  margin-bottom: 10px;
}

.hud img {
  width: 40px;
  height: auto;
  margin-right: 30px;
}

.hud-text {
  flex: 1;
  text-align: left;
  display: block;
    color:white;
}
.spaceship-container {
  position: absolute;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  width: 100px;
  height: auto;
}

.spaceship {
  width: 100px;
  display: block;
}

.missil-fixo {
  position: absolute;
  width: 16px;
  bottom: 10px;
  transition: bottom 0.2s;
}

#missil1 {
  left: 20px;
}

#missil2 {
  right: 20px;
}

.alien {
  position: absolute;
  width: 60px;
  transition: top 0.1s linear;
  z-index: 2;
}

.fase-overlay, .vida-overlay {
  position: fixed;
  top: 40%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 3rem;
  font-weight: bold;
  color: white;
  background: rgba(0, 0, 0, 0.7);
  padding: 20px 40px;
  border-radius: 15px;
  display: none;
  z-index: 100;
}

/* Tela de pause */
.pause-overlay {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(255, 255, 255, 0.238);
  z-index: 99;
  justify-content: center;
  align-items: center;
  font-size: 3rem;
  color: #ffff;
  font-weight: bold;
  font-family: sans-serif;
}
</style>
</head>
<body>
    <div class="pause-overlay" id="pauseOverlay">GAME PAUSED</div>
   <div class="fase-overlay" id="faseOverlay">FASE 1</div>
<div class="vida-overlay" id="vidaOverlay">Você perdeu uma vida!</div>
    <div class="background">
        <div class="hud">
            <div class="hud-item">
              <img src="image/clock.png" alt="clock">
              <span class="hud-text" id="hud-time">00:00</span>
            </div>
            <div class="hud-item">
              <img src="image/nave.png" alt="Nave">
              <span class="hud-text">LIFE: 3</span>
            </div>
            <div class="hud-item">
              <img src="image/alien.png" alt="Alien">
              <span class="hud-text">ALIEN: 0</span>
            </div>
          </div>

       <div class="spaceship-container">
    <img src="image/nave.png" alt="Nave principal" class="spaceship">
    <img src="image/missil.png" class="missil-fixo" id="missil1">
    <img src="image/missil.png" class="missil-fixo" id="missil2">
  </div>
  </div>

</body>
<script>
    let seconds = 0;
    let intervalId;
    let isPaused = false;
  
    const timeDisplay = document.getElementById('hud-time');
    const spaceship = document.querySelector('.spaceship');
    const pauseOverlay = document.getElementById('pauseOverlay');
  let aliensDestruidos = 0;
let vidas = 3;
let fase = 1;

const alienCounter = document.querySelectorAll('.hud-text')[2];
const vidaCounter = document.querySelectorAll('.hud-text')[1];
const faseOverlay = document.getElementById('faseOverlay');
const vidaOverlay = document.getElementById('vidaOverlay');

function atualizarHUD() {
  alienCounter.textContent = `ALIEN: ${aliensDestruidos}`;
  vidaCounter.textContent = `LIFE: ${vidas}`;
}
    function startTimer() {
      intervalId = setInterval(() => {
        if (!isPaused && seconds < 60) {
          seconds++;
          const min = String(Math.floor(seconds / 60)).padStart(2, '0');
          const sec = String(seconds % 60).padStart(2, '0');
          timeDisplay.textContent = `${min}:${sec}`;
  
          if (seconds >= 60) {
            clearInterval(intervalId);
          }
        }
      }, 1000);
    }
  
    document.addEventListener('keydown', (e) => {
      if (e.key.toLowerCase() === 'p') {
        isPaused = !isPaused;
        pauseOverlay.style.display = isPaused ? 'flex' : 'none';
      }
    });
  
    let posX = window.innerWidth / 2;
  
    document.addEventListener('keydown', (e) => {
      if (isPaused) return;
      const step = 20;
  
      if (e.key === 'ArrowLeft' || e.key.toLowerCase() === 'a') {
        posX = Math.max(0, posX - step);
      }
      if (e.key === 'ArrowRight' || e.key.toLowerCase() === 'd') {
        posX = Math.min(window.innerWidth - 100, posX + step);
      }
  
      spaceship.style.left = `${posX}px`;
    });
  
    document.addEventListener('keydown', (e) => {
      if (isPaused) return;
      if (e.code === 'Space') {
        shootMissile();
      }
    });

let misseisDisponiveis = 2;

function shootMissile() {
  if (misseisDisponiveis <= 0) return;

  const id = misseisDisponiveis === 2 ? 'missil1' : 'missil2';
  const missil = document.getElementById(id);

  // Remove o míssil da nave e dispara
  const rect = missil.getBoundingClientRect();
  const missileClone = document.createElement('img');
  missileClone.src = "image/missil.png";
  missileClone.className = 'missile';
  missileClone.style.left = `${rect.left}px`;
  missileClone.style.top = `${rect.top}px`;
  missileClone.style.position = 'absolute';
  missileClone.style.width = '16px';
  document.body.appendChild(missileClone);

  // Esconde o míssil da nave
  missil.style.visibility = 'hidden';

  let y = rect.top;
  const interval = setInterval(() => {
    if (isPaused) return;
    y -= 10;
    if (y < 0) {
      clearInterval(interval);
      missileClone.remove();
    } else {
      missileClone.style.top = `${y}px`;
    }
  }, 30);

  misseisDisponiveis--;

  // Recarregar os dois após 2 segundos
  if (misseisDisponiveis === 0) {
    setTimeout(() => {
      document.getElementById('missil1').style.visibility = 'visible';
      document.getElementById('missil2').style.visibility = 'visible';
      misseisDisponiveis = 2;
    }, 2000);
  }
}function criarAliens() {
  const centroX = window.innerWidth / 2;
  const offset = 70;

  for (let i = -1; i <= 1; i++) {
    const alien = document.createElement('img');
    alien.src = 'image/alien.png';
    alien.className = 'alien';
    alien.style.top = '-60px';
    alien.style.left = `${centroX + i * offset - 30}px`; // 30 = metade da largura do alien
    document.body.appendChild(alien);

    moverAlien(alien);
  }
}function moverAlien(alien) {
  let y = -60;

  const interval = setInterval(() => {
    if (isPaused) return;

    y += 4 + fase; // aumenta velocidade a cada fase
    alien.style.top = `${y}px`;

    const naveRect = spaceship.getBoundingClientRect();
    const alienRect = alien.getBoundingClientRect();

    if (colidiu(alienRect, naveRect)) {
      clearInterval(interval);
      alien.remove();
      perderVida();
    }

    if (y > window.innerHeight) {
      clearInterval(interval);
      alien.remove();
    }
  }, 30);
}function colidiu(a, b) {
  return !(
    a.bottom < b.top ||
    a.top > b.bottom ||
    a.right < b.left ||
    a.left > b.right
  );
}// Verifica colisão com aliens
document.querySelectorAll('.alien').forEach(alien => {
  const alienRect = alien.getBoundingClientRect();
  const missileRect = missileClone.getBoundingClientRect();

  if (colidiu(missileRect, alienRect)) {
    clearInterval(interval);
    missileClone.remove();
    alien.remove();
    aliensDestruidos++;
    atualizarHUD();

    if (aliensDestruidos >= 3) {
      passarDeFase();
    }
  }
});function perderVida() {
  vidas--;
  atualizarHUD();
  vidaOverlay.style.display = 'block';
  setTimeout(() => {
    vidaOverlay.style.display = 'none';
    resetarFase();
  }, 2000);

  if (vidas <= 0) {
    alert("GAME OVER");
    location.reload();
  }
}

function passarDeFase() {
  fase++;
  aliensDestruidos = 0;
  atualizarHUD();

  faseOverlay.textContent = `FASE ${fase}`;
  faseOverlay.style.display = 'block';
  setTimeout(() => {
    faseOverlay.style.display = 'none';
    resetarFase();
  }, 2000);
}

function resetarFase() {
  // Remove todos os aliens
  document.querySelectorAll('.alien').forEach(alien => alien.remove());
  // Centraliza nave
  posX = window.innerWidth / 2;
  spaceship.style.left = `${posX}px`;
  // Cria novos aliens
  setTimeout(criarAliens, 1000);
}atualizarHUD();
criarAliens();
    startTimer();
  </script>
</html>